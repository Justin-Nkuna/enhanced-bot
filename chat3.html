<script type="text/javascript">
  function initEmbeddedMessaging() {
    try {
      // Ensure that embeddedservice_bootstrap is available
      if (!window.embeddedservice_bootstrap) {
        console.error("embeddedservice_bootstrap is not defined.");
        return;
      }

      // Set the language
      embeddedservice_bootstrap.settings.language = 'en_US'; // Adjust language as needed

      // Initialize Embedded Messaging with proper Deployment ID, Chatbot, and URL
      embeddedservice_bootstrap.init(
        '00Ddw0000007iNh', // Deployment ID (Ensure it's correct in Salesforce)
        'Gihub_Deployment', // Chat Configuration Name (Confirm this matches Salesforce setup)
        'https://capeunionmart--dev.sandbox.my.site.com/ESWGihubDeployment1728631807080', // The URL for your chat deployment
        {
          scrt2URL: 'https://capeunionmart--dev.sandbox.my.salesforce-scrt.com' // Optional settings
        }
      );
    } catch (err) {
      console.error('Error loading Embedded Messaging:', err);
    }
  }

  // Ensure Salesforce Embedded Service script is loaded before calling the init
  if (!window.embedded_svc) {
    var script = document.createElement('script');
    script.setAttribute('src', 'https://service.force.com/embeddedservice/5.0/esw.min.js');
    script.onload = function() {
      console.log("Salesforce Embedded Service script loaded successfully.");
      initEmbeddedMessaging(); // Initialize after the script is loaded
    };
    script.onerror = function() {
      console.error("Failed to load Salesforce Embedded Service script.");
    };
    document.body.appendChild(script);
  } else {
    initEmbeddedMessaging(); // If script is already loaded, initialize right away
  }
</script>

<!-- Optional Bootstrap JS if needed for the UI, but not required for Embedded Messaging -->
<script type="text/javascript" src="https://capeunionmart--dev.sandbox.my.site.com/ESWGihubDeployment1728631807080/assets/js/bootstrap.min.js"></script>
